<!DOCTYPE html>
<html lang="nl">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Tetris</title>

<!-- Vroege thema-toepassing om FOUC te voorkomen (gelijk aan index.html) -->
<script>
  (function() {
    try {
      var pref = localStorage.getItem('theme-preference') || 'system';
      var root = document.documentElement;
      if (pref === 'light') {
        root.setAttribute('data-theme','light');
      } else if (pref === 'dark') {
        root.setAttribute('data-theme','dark');
      } else {
        root.removeAttribute('data-theme');
      }
    } catch(e) { /* noop */ }
  })();
</script>

<link rel="stylesheet" href="../styles.css" />

<style>
  /* ====== Tetris pagina-specifieke stijlen (sluiten aan op styles.css variabelen) ====== */
  :root{
    /* Extra variabelen alleen voor Tetris */
    --board-bg: #e9eef7;
    --grid: #d3dae6;
    --overlay-bg: rgba(255,255,255,.78);
  }
  @media (prefers-color-scheme: dark){
    :root{
      --board-bg: #0f172a;  /* donker staalblauw */
      --grid: #1f2937;
      --overlay-bg: rgba(17,24,39,.75);
    }
  }
  :root[data-theme="dark"]{
    --board-bg: #0f172a;
    --grid: #1f2937;
    --overlay-bg: rgba(17,24,39,.75);
  }
  :root[data-theme="light"]{
    --board-bg: #e9eef7;
    --grid: #d3dae6;
    --overlay-bg: rgba(255,255,255,.78);
  }

  *{box-sizing:border-box}
  html,body{height:100%}

  /* body gebruikt dezelfde achtergrond als styles.css */
  body{
    margin:0;
    font-family: system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, sans-serif;
    background: var(--bg-gradient);
    color: var(--text);
  }

  main{ padding:16px; }

  /* Container voor het spel */
  .app{
    width:min(1024px, 100%);
    margin:16px auto;
    background:var(--panel);
    border:1px solid var(--border);
    border-radius:16px;
    box-shadow:var(--shadow);
    padding:20px;
  }

  header.gamebar{
    display:flex;
    gap:12px;
    align-items:center;
    justify-content:space-between;
    flex-wrap:wrap;
    padding:6px 6px 0;
    margin-bottom:16px;
  }

  .stats{ display:flex; gap:8px; flex-wrap:wrap; align-items:center; }
  .stat{
    background:var(--panel);
    border:1px solid var(--border);
    border-radius:12px; padding:8px 12px; min-width:120px;
    display:flex; gap:8px; align-items:center; box-shadow:var(--shadow);
  }
  .stat b{ font-variant-numeric: tabular-nums; }

  .app button{
    border:1px solid var(--border);
    background:var(--panel);
    color:var(--text);
    border-radius:12px; padding:8px 12px; cursor:pointer; box-shadow:var(--shadow);
  }
  .app button:hover{ filter:brightness(0.98) }
  .app button:active{ transform: translateY(1px) }
  .controls{ display:flex; gap:8px; flex-wrap:wrap; }

  .layout{
    display:grid;
    grid-template-columns: 1fr 260px;
    gap:16px;
  }

  .panel{
    background:var(--panel);
    border:1px solid var(--border);
    border-radius:14px; padding:10px; box-shadow:var(--shadow);
  }
  .panel h3{ margin:0 0 8px; font-size:14px; color:var(--muted); letter-spacing:.2px; }

  .board-wrap{ position:relative; }
  canvas.board{
    display:block; margin:0 auto; background:var(--board-bg);
    border:1px solid var(--border); border-radius:12px;
  }
  .overlay{
    position:absolute; inset:0; display:none; align-items:center; justify-content:center;
    text-align:center; padding:16px; border-radius:12px;
    border:1px dashed var(--border);
    background: var(--overlay-bg);
    backdrop-filter: blur(2px); font-weight:700; font-size:20px;
    color: var(--text);
  }
  .overlay small{ display:block; color:var(--muted); font-weight:500; margin-top:6px; }

  .side{ display:flex; flex-direction:column; gap:12px; }
  .mini{
    display:block; margin:0 auto; background:var(--panel);
    border:1px solid var(--border); border-radius:10px;
  }

  .kbd{
    font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
    background:transparent; border:1px solid var(--border); border-radius:6px; padding:1px 6px; color:var(--muted);
  }
  .help{ color:var(--muted); font-size:12px; }

  /* mobiele knoppen */
  .mobile{ display:grid; grid-template-columns: repeat(5, 1fr); gap:8px; margin-top:8px; }
  .mobile button{ padding:12px 8px; font-size:16px; }
  @media (min-width: 880px){ .mobile{ display:none; } }

  /* Als viewport smaller is, zet zijpaneel onderaan */
  @media (max-width: 900px){
    .layout{ grid-template-columns: 1fr; }
  }
</style>
</head>
<body>

  <header class="site-header">
    <div class="brand" aria-label="Rvds" title="Rvds">Rvds</div>
    <nav class="site-nav">
      <a href="../index.html#apps">Apps</a>

      <div class="theme-switch" role="group" aria-label="Thema">
        <button class="theme-btn" data-theme="system" title="Systeem" aria-pressed="true">
          <!-- laptop icon -->
          <svg viewBox="0 0 24 24" width="18" height="18" aria-hidden="true"><path fill="currentColor" d="M3 5a2 2 0 0 1 2-2h14a
2 2 0 0 1 2 2v9H3V5Zm-2 11h22v1a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2v-1Z"/></svg>
          <span class="visually-hidden">Systeem</span>
        </button>
        <button class="theme-btn" data-theme="light" title="Licht" aria-pressed="false">
          <!-- sun icon -->
          <svg viewBox="0 0 24 24" width="18" height="18" aria-hidden="true"><path fill="currentColor" d="M12 4a1 1 0 0 0 1-1V1h
-2v2a1 1 0 0 0 1 1Zm0 16a1 1 0 0 0-1 1v2h2v-2a1 1 0 0 0-1-1ZM4 11H1v2h3v-2Zm22 0h-3v2h3v-2ZM5.64 6.05 3.52 3.93l-1.41 1.41 2.12
2.12 1.41-1.41Zm15.25 15.25-2.12-2.12-1.41 1.41 2.12 2.12 1.41-1.41ZM18.36 6.05l1.41-1.41L17.66 2.1l-1.41 1.41 2.11 2.54Zm-12.02
 12.9-1.41 1.41 2.12 2.12 1.41-1.41-2.12-2.12ZM12 7a5 5 0 1 1 0 10 5 5 0 0 1 0-10Z"/></svg>
          <span class="visually-hidden">Licht</span>
        </button>
        <button class="theme-btn" data-theme="dark" title="Donker" aria-pressed="false">
          <!-- moon icon -->
          <svg viewBox="0 0 24 24" width="18" height="18" aria-hidden="true"><path fill="currentColor" d="M21 12.79A9 9 0 1 1 11
.21 3a7 7 0 1 0 9.79 9.79Z"/></svg>
          <span class="visually-hidden">Donker</span>
        </button>
      </div>

    </nav>
  </header>

  <main>
    <div class="app" role="application" aria-label="Tetris">
      <header class="gamebar">
        <div class="stats">
          <div class="stat" title="Niveau (snelheid)">‚ö° Niveau: <b id="level">1</b></div>
          <div class="stat" title="Score">üèÜ Score: <b id="score">0</b></div>
          <div class="stat" title="Lijnen gewist">üìè Lijnen: <b id="lines">0</b></div>
          <div class="stat" title="High score (lokaal)">‚≠ê High score: <b id="hiscore">0</b></div>
          <button id="face" title="Nieuw spel">üôÇ</button>
        </div>
        <div class="controls">
          <button id="startPause">‚ñ∂Ô∏è Start</button>
          <button id="reset">üîÑ Reset</button>
        </div>
      </header>

      <div class="layout">
        <div class="panel board-wrap">
          <canvas id="board" class="board" width="280" height="560" aria-label="Speelveld 10√ó20"></canvas>
          <div id="overlay" class="overlay" role="status" aria-live="polite"></div>
          <div class="mobile">
            <button id="mk-left" title="Links">‚óÄÔ∏é</button>
            <button id="mk-rotL" title="Draai links">‚ü≤</button>
            <button id="mk-down" title="Zacht vallen">‚ñº</button>
            <button id="mk-rotR" title="Draai rechts">‚ü≥</button>
            <button id="mk-right" title="Rechts">‚ñ∂Ô∏é</button>
            <button id="mk-hard" style="grid-column:2 / span 3" title="Hard drop">‚§ì Hard drop</button>
          </div>
        </div>
        <div class="side">
          <div class="panel">
            <h3>Volgende</h3>
            <canvas id="next" class="mini" width="220" height="180"></canvas>
          </div>
          <div class="panel">
            <h3>Vasthouden <span class="help">(druk <span class="kbd">Shift</span> of <span class="kbd">C</span>)</span></h3>
            <canvas id="hold" class="mini" width="140" height="140"></canvas>
          </div>
          <div class="panel help">
            <h3>Besturing</h3>
            <div>‚Üê/‚Üí = links/rechts</div>
            <div>‚Üì = zacht vallen</div>
            <div>Z/X/‚Üë = draaien</div>
            <div>Spatie = hard drop</div>
            <div>C of Shift = vasthouden</div>
            <div>P of Esc = pauze</div>
            <div>R = reset</div>
          </div>
        </div>
      </div>
    </div>
  </main>

  <script src="../assets/js/theme.js" defer></script>
  <script src="../assets/js/tetris.js" defer></script>
</body>
</html>
