<!doctype html>
<html lang="nl">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
<title>Code Generator</title>

  <script>
    (function() {
      try {
        var pref = localStorage.getItem('theme-preference') || 'system';
        var root = document.documentElement;
        if (pref === 'light') {
          root.setAttribute('data-theme','light');
        } else if (pref === 'dark') {
          root.setAttribute('data-theme','dark');
        } else {
          root.removeAttribute('data-theme');
        }
      } catch(e) { /* noop */ }
    })();
  </script>

  <link rel="stylesheet" href="../styles.css" />

  <style>
  :root {
    --cg-btn-gen: #3f51b5;
    --cg-btn-clear: #e53935;
    --cg-btn-copy: #f9fafc;
    --cg-hover: rgba(63,81,181,0.12);
  }

  @media (prefers-color-scheme: dark){
    :root {
      --cg-btn-gen: #0a84ff;
      --cg-btn-clear: #ff453a;
      --cg-btn-copy: #1f2937;
      --cg-hover: rgba(144,202,249,0.18);
    }
  }

  :root[data-theme="dark"]{
    --cg-btn-gen: #0a84ff;
    --cg-btn-clear: #ff453a;
    --cg-btn-copy: #1f2937;
    --cg-hover: rgba(144,202,249,0.18);
  }

  :root[data-theme="light"]{
    --cg-btn-gen: #3f51b5;
    --cg-btn-clear: #e53935;
    --cg-btn-copy: #f9fafc;
    --cg-hover: rgba(63,81,181,0.12);
  }

  body {
    margin: 0;
    min-height: 100vh;
    font-family: system-ui, -apple-system, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
    background: var(--bg-gradient);
    color: var(--text);
    display: flex;
    flex-direction: column;
  }

  main {
    flex: 1;
    display: flex;
    align-items: center;
    justify-content: center;
    padding: 32px 16px;
  }

  .card {
    background: var(--panel);
    padding: 24px;
    border-radius: 16px;
    box-shadow: var(--shadow);
    border: 1px solid var(--border);
    text-align: center;
    width: min(360px, 92%);
  }

  h1 {
    font-size: 22px;
    margin-bottom: 12px;
    color: var(--text);
  }

  input {
    font-size: 22px;
    text-align: center;
    width: 100%;
    padding: 10px;
    border-radius: 10px;
    border: 1px solid var(--border);
    margin-bottom: 14px;
    background: var(--panel);
    color: var(--text);
    box-shadow: inset 0 1px 2px rgba(0,0,0,.08);
  }

  .card button {
    font-size: 16px;
    border: 1px solid var(--border);
    border-radius: 10px;
    padding: 8px 14px;
    margin: 4px;
    cursor: pointer;
    box-shadow: var(--shadow);
    background: var(--cg-btn-copy);
    color: var(--text);
    transition: all .15s ease;
  }
  .card button:hover { filter: brightness(0.95); }
  .card button:active { transform: translateY(1px); }

  .gen { background: var(--cg-btn-gen); color: #fff; border: none; }
  .clear { background: var(--cg-btn-clear); color: #fff; border: none; }

  #history {
    margin-top: 14px;
    font-size: 14px;
    text-align: left;
    max-height: 140px;
    overflow-y: auto;
    padding: 8px;
    border-radius: 10px;
    border: 1px solid var(--border);
    background: var(--panel);
    color: var(--text);
    box-shadow: inset 0 1px 2px rgba(0,0,0,.05);
  }

  .history-item {
    cursor: pointer;
    padding: 4px 6px;
    border-radius: 6px;
    transition: background .15s;
  }
  .history-item:hover {
    background: var(--cg-hover);
  }
  </style>
</head>

<body>
  <header class="site-header">
    <div class="brand" aria-label="Rvds" title="Rvds">Rvds</div>
    <nav class="site-nav">
      <a href="../index.html#apps">Apps</a>

      <div class="theme-switch" role="group" aria-label="Thema">
        <button class="theme-btn" data-theme="system" title="Systeem" aria-pressed="true">
          <svg viewBox="0 0 24 24" width="18" height="18" aria-hidden="true"><path fill="currentColor" d="M3 5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2v9H3V5Zm-2 11h22v1a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2v-1Z"/></svg>
          <span class="visually-hidden">Systeem</span>
        </button>
        <button class="theme-btn" data-theme="light" title="Licht" aria-pressed="false">
          <svg viewBox="0 0 24 24" width="18" height="18" aria-hidden="true"><path fill="currentColor" d="M12 4a1 1 0 0 0 1-1V1h-2v2a1 1 0 0 0 1 1Zm0 16a1 1 0 0 0-1 1v2h2v-2a1 1 0 0 0-1-1ZM4 11H1v2h3v-2Zm22 0h-3v2h3v-2ZM5.64 6.05 3.52 3.93l-1.41 1.41 2.12 2.12 1.41-1.41Zm15.25 15.25-2.12-2.12-1.41 1.41 2.12 2.12 1.41-1.41ZM18.36 6.05l1.41-1.41L17.66 2.1l-1.41 1.41 2.11 2.54Zm-12.02 12.9-1.41 1.41 2.12 2.12 1.41-1.41-2.12-2.12ZM12 7a5 5 0 1 1 0 10 5 5 0 0 1 0-10Z"/></svg>
          <span class="visually-hidden">Licht</span>
        </button>
        <button class="theme-btn" data-theme="dark" title="Donker" aria-pressed="false">
          <svg viewBox="0 0 24 24" width="18" height="18" aria-hidden="true"><path fill="currentColor" d="M21 12.79A9 9 0 1 1 11.21 3a7 7 0 1 0 9.79 9.79Z"/></svg>
          <span class="visually-hidden">Donker</span>
        </button>
      </div>
    </nav>
  </header>

  <main>
    <div class="card">
      <h1>Willekeurige Code Generator</h1>
      <input id="code" readonly value="Klik op 'Genereer code'">
      <div>
        <button class="gen" onclick="generateCode()">Genereer code</button>
        <button class="copy" onclick="copyCode()">Kopieer huidige</button>
        <button class="clear" onclick="clearHistory()">Verwijder geschiedenis</button>
      </div>
      <div id="history"></div>
    </div>
  </main>

  <script src="../assets/js/theme.js" defer></script>

<script>
const codeField = document.getElementById('code');
const historyDiv = document.getElementById('history');
let codes = JSON.parse(localStorage.getItem('codes') || '[]');

function updateHistory() {
  historyDiv.innerHTML = '';
  codes.slice().reverse().forEach(c => {
    const div = document.createElement('div');
    div.textContent = c;
    div.className = 'history-item';
    div.onclick = ()=> { codeField.value = c; }
    historyDiv.appendChild(div);
  });
}
updateHistory();

function randomLetter() {
  const letters = "abcdefghijklmnopqrstuvwxyz";
  return letters[Math.floor(Math.random()*letters.length)];
}

function generateCode() {
  let arr = [];
  for(let i=0;i<18;i++) arr.push(randomLetter());
  const numIndex = Math.floor(Math.random()*18);
  arr[numIndex] = String(Math.floor(Math.random()*10));
  let upperIndex;
  do{ upperIndex = Math.floor(Math.random()*18); }
  while(upperIndex===numIndex);
  arr[upperIndex] = arr[upperIndex].toUpperCase();
  const code = arr.slice(0,6).join('')+'-'+arr.slice(6,12).join('')+'-'+arr.slice(12,18).join('');
  codeField.value = code;

  if(!codes.includes(code)){
    codes.push(code);
    localStorage.setItem('codes', JSON.stringify(codes));
    updateHistory();
  }
}

function copyCode() {
  codeField.select();
  codeField.setSelectionRange(0,99999);
  document.execCommand('copy');
  alert('Code gekopieerd!');
}

function clearHistory() {
  if(confirm('Weet je zeker dat je alle codes wilt verwijderen?')) {
    codes = [];
    localStorage.removeItem('codes');
    updateHistory();
  }
}

generateCode();
</script>
</body>
</html>
