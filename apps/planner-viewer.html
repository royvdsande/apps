<!DOCTYPE html>
<html lang="nl">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Planner Viewer</title>

  <script>
    (function() {
      try {
        var pref = localStorage.getItem('theme-preference') || 'system';
        var root = document.documentElement;
        if (pref === 'light') {
          root.setAttribute('data-theme','light');
        } else if (pref === 'dark') {
          root.setAttribute('data-theme','dark');
        } else {
          root.removeAttribute('data-theme');
        }
      } catch(e) { /* noop */ }
    })();
  </script>

  <link rel="stylesheet" href="../styles.css" />

  <style>
    :root {
      color-scheme: light dark;
    }

    *, *::before, *::after {
      box-sizing: border-box;
    }

    body {
      margin: 0;
      font-family: "Inter", "Segoe UI", system-ui, -apple-system, BlinkMacSystemFont, "Helvetica Neue", sans-serif;
      background: var(--bg-gradient);
      color: var(--text);
      height: 100vh;
      overflow: hidden;
      -webkit-font-smoothing: antialiased;
    }

    .controls {
      position: fixed;
      top: 20px;
      left: 20px;
      z-index: 20;
      display: flex;
      gap: 12px;
      flex-wrap: wrap;
      align-items: center;
    }

    .upload-button {
      position: relative;
      display: inline-flex;
      align-items: center;
      gap: 10px;
      padding: 10px 18px;
      border-radius: 999px;
      border: 1px solid var(--border);
      background: var(--panel);
      color: var(--text);
      font-weight: 600;
      cursor: pointer;
      box-shadow: var(--shadow);
      transition: transform 0.18s ease, filter 0.18s ease;
    }

    .upload-button:hover {
      filter: brightness(1.04);
    }

    .upload-button:active {
      transform: translateY(1px);
    }

    .upload-button input {
      position: absolute;
      inset: 0;
      opacity: 0;
      cursor: pointer;
    }

    .reset-button {
      padding: 9px 16px;
      border-radius: 999px;
      border: 1px solid transparent;
      background: transparent;
      color: var(--text-muted);
      font-weight: 500;
      cursor: pointer;
      transition: color 0.2s ease, background 0.2s ease;
    }

    .reset-button:hover {
      color: var(--text);
      background: rgba(255,255,255,0.05);
    }

    .status {
      min-height: 24px;
      padding: 6px 12px;
      border-radius: 999px;
      border: 1px solid transparent;
      font-size: 14px;
      color: var(--text-muted);
      background: rgba(0,0,0,0.25);
      backdrop-filter: blur(6px);
      box-shadow: var(--shadow);
    }

    .status[data-variant="error"] {
      color: #ffb4b4;
      border-color: rgba(255, 82, 82, 0.5);
      background: rgba(255, 82, 82, 0.12);
    }

    body[data-theme="light"] .status {
      background: rgba(255,255,255,0.7);
      border-color: rgba(0,0,0,0.06);
      color: var(--text-muted);
    }

    body[data-theme="light"] .status[data-variant="error"] {
      border-color: rgba(220, 38, 38, 0.3);
      background: rgba(248, 113, 113, 0.18);
      color: #7f1d1d;
    }

    .drop-zone {
      position: relative;
      width: 100vw;
      height: 100vh;
      overflow: hidden;
      background: radial-gradient(circle at 20% 20%, rgba(255,255,255,0.18), transparent 55%),
                  radial-gradient(circle at 80% 30%, rgba(76, 201, 240, 0.12), transparent 50%),
                  var(--bg-gradient);
      border-top: 1px solid rgba(255,255,255,0.06);
    }

    .drop-zone::after {
      content: "";
      position: absolute;
      inset: 0;
      pointer-events: none;
      border: 2px dashed transparent;
      border-radius: 32px;
      transition: border-color 0.25s ease, background 0.25s ease;
    }

    .drop-zone.dragging::after {
      border-color: rgba(255,255,255,0.45);
      background: rgba(255,255,255,0.05);
    }

    body[data-theme="light"] .drop-zone.dragging::after {
      border-color: rgba(0,0,0,0.3);
      background: rgba(255,255,255,0.3);
    }

    .viewer {
      position: absolute;
      inset: 0;
      overflow-x: auto;
      overflow-y: hidden;
      display: flex;
      align-items: center;
      justify-content: flex-start;
      padding: 0 12vw 0 6vw;
      scroll-behavior: smooth;
      touch-action: pan-x;
      cursor: grab;
    }

    .viewer:active {
      cursor: grabbing;
    }

    .viewer::-webkit-scrollbar {
      height: 12px;
    }

    .viewer::-webkit-scrollbar-track {
      background: rgba(255,255,255,0.06);
    }

    .viewer::-webkit-scrollbar-thumb {
      background: rgba(255,255,255,0.25);
      border-radius: 999px;
    }

    body[data-theme="light"] .viewer::-webkit-scrollbar-track {
      background: rgba(0,0,0,0.06);
    }

    body[data-theme="light"] .viewer::-webkit-scrollbar-thumb {
      background: rgba(0,0,0,0.18);
    }

    .viewer img {
      height: 100vh;
      width: auto;
      display: block;
      border-radius: 24px;
      box-shadow: 0 32px 60px rgba(15, 23, 42, 0.45);
      background: var(--panel);
      transition: transform 0.3s ease;
      user-select: none;
      pointer-events: none;
    }

    body[data-theme="light"] .viewer img {
      box-shadow: 0 32px 70px rgba(15, 23, 42, 0.18);
    }

    .viewer img:hover {
      transform: scale(1.01);
    }

    .placeholder {
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      text-align: center;
      max-width: min(520px, 90vw);
      padding: 32px 28px;
      border-radius: 24px;
      background: rgba(12, 17, 33, 0.58);
      border: 1px solid rgba(255,255,255,0.1);
      backdrop-filter: blur(18px);
      color: rgba(255,255,255,0.92);
      transition: opacity 0.3s ease;
      pointer-events: none;
    }

    .placeholder h1 {
      margin: 0 0 12px;
      font-size: clamp(28px, 6vw, 38px);
    }

    .placeholder p {
      margin: 0 0 16px;
      line-height: 1.6;
      color: rgba(255,255,255,0.75);
      font-size: 16px;
    }

    .placeholder ul {
      list-style: none;
      padding: 0;
      margin: 0;
      display: grid;
      gap: 8px;
      color: rgba(255,255,255,0.74);
      font-size: 14px;
    }

    .placeholder li::before {
      content: "•";
      margin-right: 8px;
      color: rgba(173, 216, 230, 0.9);
    }

    body[data-theme="light"] .placeholder {
      background: rgba(255,255,255,0.88);
      border-color: rgba(0,0,0,0.08);
      color: rgba(15, 23, 42, 0.86);
    }

    body[data-theme="light"] .placeholder p,
    body[data-theme="light"] .placeholder ul {
      color: rgba(15, 23, 42, 0.65);
    }

    .drop-zone.has-image .placeholder {
      opacity: 0;
    }

    .drop-zone.has-image::after {
      opacity: 0;
    }

    @media (max-width: 768px) {
      .controls {
        left: 16px;
        right: 16px;
        top: 16px;
        gap: 8px;
      }

      .status {
        width: 100%;
        text-align: center;
      }

      .viewer {
        padding: 0 4vw 0 4vw;
      }

      .viewer img {
        border-radius: 16px;
      }

      .placeholder {
        padding: 24px;
      }
    }
  </style>
</head>
<body>
  <div class="controls">
    <label class="upload-button">
      <svg aria-hidden="true" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.6" stroke-linecap="round" stroke-linejoin="round">
        <path d="M12 16V4"></path>
        <path d="m8 8 4-4 4 4"></path>
        <path d="M20 16v2a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2v-2"></path>
      </svg>
      <span>Afbeelding kiezen</span>
      <input id="fileInput" type="file" accept="image/*" aria-label="Kies een afbeelding" />
    </label>
    <button id="resetButton" class="reset-button" type="button" hidden>Verwijderen</button>
    <div id="status" class="status" role="status" aria-live="polite"></div>
  </div>

  <div id="dropZone" class="drop-zone" role="region" aria-label="Afbeelding upload zone">
    <div class="placeholder" id="placeholder">
      <h1>Horizontale Planner Viewer</h1>
      <p>Upload de brede planning-afbeelding en scroll horizontaal met je muiswiel of je vinger om de dagen te bekijken.</p>
      <ul>
        <li>Klik op <strong>Afbeelding kiezen</strong> of sleep een bestand naar dit venster.</li>
        <li>De afbeelding wordt op volledige vensterhoogte getoond zonder vervorming.</li>
        <li>Gebruik het muiswiel of veeg met je vinger om naar rechts en links te bewegen.</li>
      </ul>
    </div>
    <div id="viewer" class="viewer" tabindex="0" aria-live="polite" aria-label="Horizontale afbeeldingsweergave">
      <img id="image" alt="" hidden />
    </div>
  </div>

  <script>
    (function() {
      const fileInput = document.getElementById('fileInput');
      const dropZone = document.getElementById('dropZone');
      const viewer = document.getElementById('viewer');
      const img = document.getElementById('image');
      const status = document.getElementById('status');
      const resetButton = document.getElementById('resetButton');
      let objectUrl = null;

      function setStatus(message, variant) {
        if (!message) {
          status.textContent = '';
          status.dataset.variant = '';
          status.hidden = true;
          return;
        }
        status.hidden = false;
        status.textContent = message;
        status.dataset.variant = variant || 'info';
      }

      function clearImage() {
        if (objectUrl) {
          URL.revokeObjectURL(objectUrl);
          objectUrl = null;
        }
        img.removeAttribute('src');
        img.alt = '';
        img.hidden = true;
        dropZone.classList.remove('has-image');
        setStatus('Klaar voor een nieuwe afbeelding.');
        resetButton.hidden = true;
      }

      function loadFile(file) {
        if (!file) return;
        if (!file.type || !file.type.startsWith('image/')) {
          setStatus('Selecteer een geldig afbeeldingsbestand (PNG, JPG, GIF…).', 'error');
          return;
        }
        if (objectUrl) {
          URL.revokeObjectURL(objectUrl);
          objectUrl = null;
        }
        objectUrl = URL.createObjectURL(file);
        img.src = objectUrl;
        img.alt = file.name ? 'Geüploade afbeelding: ' + file.name : 'Geüploade afbeelding';
        img.hidden = false;
        dropZone.classList.add('has-image');
        setStatus(file.name || 'Afbeelding geladen.');
        resetButton.hidden = false;
      }

      fileInput.addEventListener('change', function() {
        const file = this.files && this.files[0];
        loadFile(file);
      });

      resetButton.addEventListener('click', function() {
        fileInput.value = '';
        clearImage();
      });

      ['dragenter', 'dragover'].forEach(evt => {
        dropZone.addEventListener(evt, function(e) {
          e.preventDefault();
          e.stopPropagation();
          dropZone.classList.add('dragging');
          setStatus('Laat de afbeelding los om te laden.');
        });
      });

      ['dragleave', 'dragend'].forEach(evt => {
        dropZone.addEventListener(evt, function(e) {
          if (e.target === dropZone) {
            dropZone.classList.remove('dragging');
            if (!dropZone.classList.contains('has-image')) {
              setStatus('Sleep een afbeelding hierheen of klik op de knop.');
            }
          }
        });
      });

      dropZone.addEventListener('drop', function(e) {
        e.preventDefault();
        e.stopPropagation();
        dropZone.classList.remove('dragging');
        const file = e.dataTransfer && e.dataTransfer.files && e.dataTransfer.files[0];
        if (file) {
          loadFile(file);
        }
      });

      viewer.addEventListener('wheel', function(e) {
        if (!dropZone.classList.contains('has-image')) return;
        const dominantDelta = Math.abs(e.deltaY) > Math.abs(e.deltaX) ? e.deltaY : e.deltaX;
        if (dominantDelta !== 0) {
          e.preventDefault();
          viewer.scrollLeft += dominantDelta;
        }
      }, { passive: false });

      viewer.addEventListener('keydown', function(e) {
        if (!dropZone.classList.contains('has-image')) return;
        const distance = Math.max(viewer.clientWidth * 0.8, 200);
        if (e.key === 'ArrowRight') {
          e.preventDefault();
          viewer.scrollBy({ left: distance, behavior: 'smooth' });
        } else if (e.key === 'ArrowLeft') {
          e.preventDefault();
          viewer.scrollBy({ left: -distance, behavior: 'smooth' });
        } else if (e.key === 'Home') {
          e.preventDefault();
          viewer.scrollTo({ left: 0, behavior: 'smooth' });
        } else if (e.key === 'End') {
          e.preventDefault();
          viewer.scrollTo({ left: viewer.scrollWidth, behavior: 'smooth' });
        }
      });

      img.addEventListener('load', function() {
        viewer.scrollLeft = 0;
        try {
          viewer.focus({ preventScroll: true });
        } catch (_) {
          viewer.focus();
        }
      });

      window.addEventListener('beforeunload', function() {
        if (objectUrl) {
          URL.revokeObjectURL(objectUrl);
        }
      });

      setStatus('Sleep een afbeelding hierheen of klik op de knop.');
    })();
  </script>
</body>
</html>
