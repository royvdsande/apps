<!doctype html>
<html lang="nl">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Roy van der Sande â€” Apps</title>
<meta name="description" content="Apps & projecten van Roy van der Sande." />
data:image/svg+xml,<svg xmlns=<text y='80' font-size='80'>ðŸ“ˆ</text></svg>">
<meta property="og:title" content="Roy van der Sande â€” Apps" />
<meta property="og:description" content="Overzicht van apps & projecten." />
<meta property="og:type" content="website" />
<meta name="color-scheme" content="light dark" />
<style>
  :root{
    --bg: oklch(99% 0 0);
    --bg2: oklch(97% 0.03 250);
    --fg: oklch(18% 0 0);
    --muted: oklch(45% 0.02 250);
    --card: color-mix(in oklab, var(--bg) 70%, var(--fg));
    --accent: #2d7ef7;
    --accent2: #00b894;
    --ring: color-mix(in oklab, var(--accent) 35%, transparent);
    --grid: color-mix(in oklab, var(--fg) 15%, transparent);
  }
  @media (prefers-color-scheme: dark){
    :root{
      --bg: oklch(21% 0.02 250);
      --bg2: oklch(16% 0.02 250);
      --fg: oklch(95% 0 0);
      --muted: oklch(75% 0.02 250);
      --card: color-mix(in oklab, var(--bg) 75%, var(--fg));
      --grid: color-mix(in oklab, var(--fg) 15%, transparent);
    }
  }
  *{box-sizing:border-box}
  body{
    margin:0;
    font: 15px/1.5 system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;
    color: var(--fg);
    background:
      radial-gradient(1200px 600px at 10% -10%, color-mix(in oklab, var(--accent) 10%, transparent), transparent 60%),
      radial-gradient(1400px 800px at 120% 10%, color-mix(in oklab, var(--accent2) 14%, transparent), transparent 60%),
      linear-gradient(180deg, var(--bg) 0%, var(--bg2) 100%);
    min-height:100dvh;
  }
  .container{ max-width:1100px; margin:0 auto; padding:24px; }
  header{ display:flex; align-items:center; justify-content:space-between; gap:16px; }
  .brand{ display:flex; align-items:center; gap:12px; }
  .logo{
    width:42px;height:42px;border-radius:12px;
    background: linear-gradient(135deg, var(--accent), #6aa8ff);
    display:grid;place-items:center;color:#fff;font-weight:800;
    box-shadow: 0 8px 20px color-mix(in oklab, var(--accent) 35%, transparent);
  }
  .brand h1{ font-size:18px; margin:0; }
  .hero{
    margin:28px 0 10px;
    display:grid; gap:10px;
  }
  .hero h2{ font-size:28px; margin:0; letter-spacing:0.2px; }
  .hero p{ margin:0; color: var(--muted); max-width:70ch; }
  .toolbar{
    display:flex; flex-wrap:wrap; gap:10px; align-items:center; margin:18px 0 8px;
  }
  .search{
    flex:1 1 280px; display:flex; align-items:center; gap:8px;
    background: color-mix(in oklab, var(--bg) 70%, var(--fg));
    border: 1px solid var(--grid); border-radius:12px; padding:10px 12px;
  }
  .search input{
    flex:1; border:none; outline:none; background:transparent; color:var(--fg); font:inherit;
  }
  .sel, .btn{
    border:1px solid var(--grid); background: color-mix(in oklab, var(--bg) 75%, var(--fg));
    padding:10px 12px; border-radius:12px; color:var(--fg); cursor:pointer; font:inherit;
  }
  .btn.primary{ background: color-mix(in oklab, var(--accent) 18%, var(--bg)); border-color: var(--ring); }
  .chips{ display:flex; gap:8px; flex-wrap:wrap; margin-top:6px; }
  .chip{
    padding:6px 10px; border:1px dashed var(--grid); border-radius:999px; cursor:pointer; user-select:none;
  }
  .chip.active{ border-color: var(--accent); color: var(--accent); background: color-mix(in oklab, var(--accent) 10%, transparent); }
  .grid{
    display:grid; gap:14px; margin-top:16px;
    grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
  }
  .card{
    position:relative;
    background: color-mix(in oklab, var(--bg) 65%, var(--fg));
    border:1px solid var(--grid); border-radius:14px; padding:14px;
    transition: transform .15s ease, box-shadow .2s ease;
  }
  .card:hover{ transform: translateY(-2px); box-shadow: 0 10px 24px color-mix(in oklab, var(--accent) 18%, transparent); }
  .card .row{ display:flex; align-items:center; justify-content:space-between; gap:10px; }
  .icon{
    width:44px;height:44px;border-radius:12px; display:grid;place-items:center; font-size:22px; color:#fff; font-weight:700;
    background: linear-gradient(135deg, var(--accent), #6aa8ff);
  }
  .title{ font-weight:700; font-size:16px; margin:0; }
  .desc{ margin:8px 0 10px; color:var(--muted); min-height:3.2em; }
  .tags{ display:flex; gap:6px; flex-wrap:wrap; }
  .tag{ font-size:12px; padding:3px 8px; border-radius:999px; background: color-mix(in oklab, var(--bg) 60%, var(--fg)); border:1px solid var(--grid); }
  .card a.btn{ text-decoration:none; }
  footer{ opacity:.8; margin:24px 0 8px; font-size:13px; color:var(--muted); display:flex; justify-content:space-between; flex-wrap:wrap; gap:10px; }
  .hidden{ display:none !important; }
  .pill{ padding:4px 8px; border:1px solid var(--grid); border-radius:999px; }
  dialog{
    border:none; border-radius:14px; padding:0; width:min(720px, 92vw);
    background: color-mix(in oklab, var(--bg) 70%, var(--fg)); color: var(--fg);
  }
  .dlg-head{ padding:14px 16px; border-bottom:1px solid var(--grid); display:flex; justify-content:space-between; align-items:center; }
  .dlg-body{ padding:14px 16px; display:grid; gap:10px; }
  .row{ display:flex; gap:10px; align-items:center; flex-wrap:wrap; }
  .field{ flex:1; display:grid; gap:6px; min-width:180px; }
  .field input, .field textarea{
    padding:10px 12px; border:1px solid var(--grid); border-radius:10px; background: color-mix(in oklab, var(--bg) 80%, var(--fg)); color: var(--fg);
    font: inherit;
  }
  .codebox{
    width:100%; min-height:140px; font-family: ui-monospace, SFMono-Regular, Menlo, Consolas, monospace;
    background: color-mix(in oklab, var(--bg) 80%, var(--fg)); color: var(--fg); border:1px solid var(--grid); border-radius:10px; padding:10px;
  }
  .kbd{ font-family: ui-monospace, SFMono-Regular, Menlo, Consolas, monospace; border:1px solid var(--grid); border-radius:6px; padding:1px 6px; }
  .sep{ height:1px; background:var(--grid); margin:8px 0; }
</style>
</head>
<body>
  <div class="container">
    <header>
      <div class="brand">
        <div class="logo">R</div>
        <div>
          <h1>Roy van der Sande</h1>
          <div class="pill">Apps & projecten</div>
        </div>
      </div>
      <nav class="row">
        #appsApps</a>
        <button class="btn" id="openAdd">Add App helper</button>
        mailto:contact@example.comContact</a>
      </nav>
    </header>

    <section class="hero">
      <h2>Welkom op mijn playground.</h2>
      <p>Hier verzamel ik mijn webâ€‘apps, tools en experimenten. Klik op een kaart om te starten, of gebruik zoeken & tags om snel te filteren.</p>
      <div class="toolbar">
        <div class="search">
          <svg width="18" height="18" viewBox="0 0 24 24" fill="none" aria-hidden="true"><path d="M21 21l-4.2-4.2M10.8 18.6a7.8 7.8 0 1 1 0-15.6 7.8 7.8 0 0 1 0 15.6z" stroke="currentColor" stroke-width="1.6" stroke-linecap="round"/></svg>
          <input id="q" type="search" placeholder="Zoek apps (tip: druk â€˜/â€™)" autocomplete="off" />
        </div>
        <select id="sort" class="sel" title="Sorteren">
          <option value="featured">Uitgelicht</option>
          <option value="alpha">Aâ€‘Z</option>
          <option value="new">Nieuwste eerst</option>
        </select>
      </div>
      <div id="chips" class="chips"></div>
    </section>

    <section id="apps" class="grid" aria-live="polite"></section>

    <footer>
      <div>Â© <span id="y"></span> Roy van der Sande</div>
      <div>Tip: voeg <span class="kbd">apps.json</span> toe aan de repo om apps te beheren zonder deze HTML te wijzigen.</div>
    </footer>
  </div>

  <!-- Add App Helper (genereert JSON die je kunt plakken in APPS of apps.json) -->
  <dialog id="dlg">
    <div class="dlg-head">
      <strong>Nieuwe app toevoegen</strong>
      <button class="btn" id="closeDlg">Sluiten</button>
    </div>
    <div class="dlg-body">
      <div class="row">
        <div class="field">
          <label>Titel</label>
          <input id="fTitle" placeholder="Bijv. Mini GeoGebra" />
        </div>
        <div class="field">
          <label>Bestand / Link</label>
          <input id="fHref" placeholder="bijv. geogebra.html of https://..." />
        </div>
        <div class="field">
          <label>Emoji / Icon letter</label>
          <input id="fIcon" placeholder="ðŸ“ˆ of G" />
        </div>
      </div>
      <div class="field">
        <label>Korte beschrijving</label>
        <textarea id="fDesc" rows="2" placeholder="Wat doet de app?"></textarea>
      </div>
      <div class="row">
        <div class="field">
          <label>Tags (kommaâ€‘gescheiden)</label>
          <input id="fTags" placeholder="wiskunde, grafieken, tools" />
        </div>
        <div class="field">
          <label>Kleur (optioneel)</label>
          <input id="fColor" placeholder="#2d7ef7 of gradient CSS" />
        </div>
        <div class="field">
          <label>Uitgelicht?</label>
          <select id="fFeat">
            <option value="true">Ja</option>
            <option value="false" selected>Nee</option>
          </select>
        </div>
      </div>
      <div class="sep"></div>
      <div class="row">
        <button class="btn primary" id="gen">Genereer JSON</button>
        <div class="pill">Plak dit in <b>APPS</b> hieronder of in <b>apps.json</b> in je repo.</div>
      </div>
      <textarea id="out" class="codebox" readonly></textarea>
    </div>
  </dialog>

<script>
(() => {
  // ---- Config: Apps die standaard getoond worden ----
  // Je kunt eenvoudig een nieuw object pushen of apps.json gebruiken (zie verderop).
  const APPS = [
    {
      id: 'mini-geo',
      title: 'Mini GeoGebra',
      href: 'geogebra.html', // jouw bestand in de repo
      desc: 'Plot y=f(x), param, polair; sliders, analyse, integralen. Lichtgewicht en snel.',
      icon: 'ðŸ“ˆ',
      color: 'linear-gradient(135deg,#2d7ef7,#6aa8ff)',
      tags: ['wiskunde','grafieken','tools'],
      featured: true,
      addedAt: '2025-10-07'
    },
    // ðŸ”½ Voeg hier gerust meer apps toe â€¦
    // {
    //   id: 'naam-kort',
    //   title: 'Mijn App',
    //   href: 'mijnapp.html',
    //   desc: 'Korte beschrijving.',
    //   icon: 'ðŸ§°',
    //   color: '#00b894',
    //   tags: ['tag1','tag2'],
    //   featured: false,
    //   addedAt: '2025-10-07'
    // }
  ];

  // ---- Optioneel: lees apps.json en merge (zonder dat de pagina breekt als file ontbreekt) ----
  async function loadExternalApps(){
    try{
      const res = await fetch('apps.json', {cache:'no-store'});
      if (!res.ok) return [];
      const json = await res.json();
      if (!Array.isArray(json)) return [];
      return json;
    }catch{ return []; }
  }

  // ---- State ----
  let allApps = [];
  let activeTag = null;

  // ---- DOM refs ----
  const appsEl = document.getElementById('apps');
  const chipsEl = document.getElementById('chips');
  const qEl = document.getElementById('q');
  const sortEl = document.getElementById('sort');
  const yearEl = document.getElementById('y');

  yearEl.textContent = new Date().getFullYear();

  // ---- Render helpers ----
  function appCard(a){
    const bg = a.color || 'linear-gradient(135deg,var(--accent),#6aa8ff)';
    const icon = (a.icon || 'ðŸ”—').slice(0,2);
    const tags = (a.tags || []).map(t => `<span class="tag" data-tag="${t}">${t}</span>`).join('');
    return `
      <article class="card" data-title="${esc(a.title)}" data-tags="${esc((a.tags||[]).join(','))}" data-added="${esc(a.addedAt||'')}" data-featured="${a.featured?'1':'0'}">
        <div class="row">
          <div class="icon" style="background:${bg}">${esc(icon)}</div>
          <h3 class="title">${esc(a.title)}</h3>
        </div>
        <p class="desc">${esc(a.desc||'')}</p>
        <div class="row">
          <div class="tags">${tags}</div>
          ${esc(a.href)}Open</a>
        </div>
      </article>
    `;
  }
  function esc(s){ return String(s).replace(/[&<>"']/g, m => ({'&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;',"'":'&#39;'}[m])); }

  function computeAllTags(list){
    const set = new Set();
    list.forEach(a => (a.tags||[]).forEach(t => set.add(t)));
    return Array.from(set).sort((a,b)=>a.localeCompare(b));
  }

  function renderChips(){
    const tags = computeAllTags(allApps);
    const chips = [`<span class="chip ${!activeTag?'active':''}" data-tag="">Alle</span>`]
      .concat(tags.map(t => `<span class="chip ${activeTag===t?'active':''}" data-tag="${esc(t)}">${esc(t)}</span>`));
    chipsEl.innerHTML = chips.join('');
  }

  function renderGrid(){
    // filter by search + tag
    const q = qEl.value.trim().toLowerCase();
    const list = allApps.filter(a => {
      const matchesTag = !activeTag || (a.tags||[]).includes(activeTag);
      const hay = (a.title+' '+(a.desc||'')+' '+(a.tags||[]).join(' ')).toLowerCase();
      const matchesQ = !q || hay.includes(q);
      return matchesTag && matchesQ;
    });

    // sort
    const mode = sortEl.value;
    list.sort((a,b) => {
      if (mode==='alpha') return a.title.localeCompare(b.title);
      if (mode==='new') return (b.addedAt||'').localeCompare(a.addedAt||'');
      // featured first, then alpha
      const fa = a.featured?1:0, fb = b.featured?1:0;
      if (fa!==fb) return fb-fa;
      return a.title.localeCompare(b.title);
    });

    appsEl.innerHTML = list.map(appCard).join('');
  }

  // ---- Events ----
  chipsEl.addEventListener('click', (e) => {
    const t = e.target.closest('.chip'); if (!t) return;
    activeTag = t.getAttribute('data-tag') || null;
    renderChips(); renderGrid();
  });

  appsEl.addEventListener('click', (e) => {
    const t = e.target.closest('.tag'); if (!t) return;
    activeTag = t.getAttribute('data-tag') || null;
    renderChips(); renderGrid();
  });

  qEl.addEventListener('input', renderGrid);
  sortEl.addEventListener('change', renderGrid);
  // keyboard shortcut: '/' focust zoeken
  window.addEventListener('keydown', (e) => {
    if (e.key === '/' && !/input|textarea/i.test(document.activeElement.tagName)) {
      e.preventDefault(); qEl.focus();
    }
  });

  // ---- Init ----
  (async () => {
    const ext = await loadExternalApps();
    // merge: externe apps krijgen voorrang op duplicaten (zelfde id)
    const byId = new Map();
    [...APPS, ...ext].forEach(a => byId.set(a.id || a.href || a.title, a));
    allApps = Array.from(byId.values());
    renderChips(); renderGrid();
  })();

  // ---- Add App Helper (dialog) ----
  const dlg = document.getElementById('dlg');
  const openAdd = document.getElementById('openAdd');
  const closeDlg = document.getElementById('closeDlg');
  const genBtn = document.getElementById('gen');
  const out = document.getElementById('out');

  openAdd.addEventListener('click', () => dlg.showModal());
  closeDlg.addEventListener('click', () => dlg.close());
  genBtn.addEventListener('click', () => {
    const o = {
      id: slug(document.getElementById('fTitle').value || 'nieuwe-app'),
      title: document.getElementById('fTitle').value || 'Nieuwe App',
      href: document.getElementById('fHref').value || 'app.html',
      desc: document.getElementById('fDesc').value || '',
      icon: document.getElementById('fIcon').value || 'ðŸ§©',
      color: document.getElementById('fColor').value || '',
      tags: (document.getElementById('fTags').value || '').split(',').map(s => s.trim()).filter(Boolean),
      featured: document.getElementById('fFeat').value === 'true',
      addedAt: (new Date()).toISOString().slice(0,10)
    };
    out.value = JSON.stringify(o, null, 2);
    out.select();
  });

  function slug(s){ return String(s).toLowerCase().replace(/[^a-z0-9]+/g,'-').replace(/(^-|-$)/g,'').slice(0,40) || 'app'; }
})();
</script>
</body>
</html>
